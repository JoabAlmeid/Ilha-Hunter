<!DOCTYPE html>
<html>
<head>
    <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles/main.css" />
    <title>Permalist</title>
  </head>
  <title>Minha To-Do List</title>
  <script>
  function enableEdit(id) {
    // Esconde todos os outros campos de antes da edição
    document.querySelectorAll(".todo-item").forEach(item => {
      const todoId = item.dataset.id;
      const span = document.getElementById(`title-${todoId}`);
      const input = document.getElementById(`input-${todoId}`);
      const saveBtn = document.getElementById(`saveBtn-${todoId}`);
      const editBtn = document.getElementById(`editBtn-${todoId}`);

      span.style.display = "inline";
      input.style.display = "none";
      saveBtn.style.display = "none";
      editBtn.style.display = "inline";
    });

    // Obtém os elementos DOM correspondentes ao título e ao campo de input (e botões)
    // Apenas repetindo o que foi feito acima com nome de constante diferente.
    const titleEl = document.getElementById(`title-${id}`);
    const inputEl = document.getElementById(`input-${id}`);
    const saveBtn = document.getElementById(`saveBtn-${id}`);
    const editBtn = document.getElementById(`editBtn-${id}`);

    // Copia o estilo do <p> para o input de edição
    const style = window.getComputedStyle(titleEl);
    inputEl.style.width = `${titleEl.offsetWidth}px`;
    inputEl.style.fontSize = style.fontSize;
    inputEl.style.fontFamily = style.fontFamily;
    inputEl.style.fontWeight = style.fontWeight;
    inputEl.style.padding = style.padding;
    inputEl.style.margin = style.margin;
    inputEl.style.border = "1px solid #ccc";
    inputEl.style.boxSizing = "border-box";

    // Mostra input e botão de salvar, esconde o título e botão de editar
    titleEl.style.display = "none";
    inputEl.style.display = "inline-block";
    editBtn.style.display = "none";
    saveBtn.style.display = "inline-block";

    //faz focar no novo input e joga o curso para além da última letra
    inputEl.focus();
    inputEl.setSelectionRange(inputEl.value.length, inputEl.value.length);
  }

  //faz o botão de salvar aparecer quando algo muda no input de edição
  function handleInput(id) {
    document.getElementById(`saveBtn-${id}`).style.display = "inline";
  }

  
</script>